# OMPASS Radius Logon


## 개요
OMPASS Radius Logon은 인증을 위해 RADIUS를 사용하는 거의 모든 장치나 시스템과 통합됩니다.
1. **Ompass** 를 VPN 또는 다른 기기와 통합하려면 네트워크 내의 머신에 로컬 프록시 서비스를 설치해야 합니다.
2. 로컬 프록시 서비스 설치가 완료되면 1차 로그인이 완료된 후 Ompass push 알림을 통해 모바일 기기로 사용자에게 자동 인증 요청을 보냅니다.
3. OMPASS Radius 2차 인증은 사용자 셀프 등록을 지원하지 않기 때문에 **OMPASS Portal** 에서 **LDAP** 을 이용하여 사전등록이 진행되어야 합니다.
   >   <h4>연결 요구 사항</h4>
   >이 어플리케이션은 SSL TCP 포트 443에서 Ompass 서비스와 통신합니다.</br></br>
   >목적지 IP 주소 또는 IP 주소 범위를 사용하는 규칙으로 Ompass 서비스에 대한 아웃바운드 엑세스를 제한하는 방화벽 구성은 권장되지 않습니다.</br></br>
   >TLS 1.0 또는 1.1 연결이나 안전하지 않은 TLS/SSL 암호화 모음을 지원하지 않습니다.


## 중요 참고 사항
>  Ompass 프록시를 설치하기 전에 RADIUS 장치 사용자를 위한 기본 인증 구성이 이미 작동 중이어야 합니다. </br>
>  사용자들은 Ompass portal 에 회원가입을 하여 Ompass 등록이 먼저 진행되어야 합니다. </br>
>  OMPASS Radius 2차 인증은 사용자 셀프 등록을 지원하지 않기 때문에 **OMPASS Portal** 에서 **LDAP** 을 이용하여 사전등록이 진행되어야 합니다.



## 1. RADIUS 사용자 등록 (LDAP)

### 사전 작업
1. OMPASS RADIUS 2차 인증을 진행하려는 사용자는 OMPASS 포탈에 회원가입 및 OMPASS 등록이 완료되어 있어야 합니다.
##
1. **OMPASS Portal** 에 관리자 계정으로 로그인하세요.

2. OMPASS 프록시 설치 ([OMPASS 프록시 문서](./ompass_proxy/ompass_proxy.md) 참조)
   * OMPASS 프록시에 연동할 LDAP 서버는 기존 RADIUS 서버와 연동된 LDAP 서버여야합니다. 

3. RADIUS 사용자 등록은 LDAP 등록으로만 가능합니다. (**사용자** -> **추가** -> OMPASS 사용자 추가 방식 선택 > LDAP 동기화)
    
4. LDAP 설정 목록 > 추가  
   
5. **어플리케이션** → **추가**로 이동합니다.

6. **유형**을 **Radius**로 선택하고 이름, 정책 설정 등을 추가한 후 **저장**을 클릭합니다.

7. 생성된 Radius 어플리케이션을 다시 선택합니다.

8. 어플리케이션 상세 정보 > Radius Proxy 정보 > 사용자 추가 선택 > LDAP 설정 선택 > 사용자 목록 가져오기

9. 사용자 목록이 조회된다면 동기화 버튼 선택
   * RADIUS 사용자 동기화는 LDAP 에서 조회한 사용자의 이메일과 포탈에 등록되어 있는 사용자의 이메일과 비교하여 같은 경우에만 등록됩니다.    


## 2. RADIUS 2차 인증

RADIUS 사용자 등록 시 생성했던 RADIUS 어플리케이션 상세 정보의 API 서버 주소, 클라이언트 아이디, 시크릿 키를 확인

## 3. OMPASS 프록시에 기존 RADIUS 서버 연동
 [OMPASS 프록시 문서](../radius/ompass_proxy.md)를 참고하세요.

## 4. RADIUS 클라이언트구성
프록시가 실행되면 RADIUS 클라이언트를 구성하여 인증에 사용해야 합니다.

   1. 클라이언트 설정에서 RADIUS 서버 IP를 인증 프록시의 IP 주소로, RADIUS 서버 포트를 1812 로, RADIUS 비밀번호를 RADIUS 설정 섹션 에서 구성한 적절한 비밀번호로 설정합니다 .
   2. 클라이언트에서 사용자 로그인에 대한 인증 체계를 업데이트하여 사용자 인증을 위한 기존 인증 서버를 새로운 Ompass proxy(RADIUS)로 변경해야 합니다.

## 5. 설정 테스트

설정을 테스트하려면 인증 장치를 사용하여 OMPASS portal에 등록된 사용자로 새로 구성한 시스템에 로그인을 시도하세요.




